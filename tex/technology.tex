\section{Technology Today}
Advancements in three major areas---networking, MCUs, and energy
harvesting---open new opportunites for networked embedded systems and generate
new implications on how an OS should manage activity, security, and privacy.

\smallskip\noindent
\textbf{Integrating TinyOS and Bluetooth Low Energy.}
The majority of BLE stacks provided by chip manufacturers expect them to be
implemented in embedded systems that follow some variation of the sequential
programming model. TinyOS is an event driven system designed for low power
embedded electronics. Recent work has sought to adapt the Nordic BLE stack to
work in this environment and found that the quickest integration of these two required
making TinyOS's event driven programming model function sequentially. As TinyOS
was not designed to incorporate large sequential software abstractions this
resulted in numerous inefficiencies. While an event-driven stack written from
the ground up may be able to overcome these, finding a means to integrate
TinyOS with manufacturer-provided software stacks is a requirement to enable
more widespread adoption of the platform.

% The question remains open whether a sequential
% system with the same versatility as TinyOS could eliminate these
% inefficiencies.  Also, it is possible that a stack
% constructed from the ground up that leveraged event driven programming and BLE
% technology could result in an embedded system more efficient than the
% manufacturer provided software implementations.  BLE is an excellent
% technology to be used in embedded systems but integrating TinyOS with stacks
% provided by manufactures is not sustainable nor ideal for future research.

\smallskip\noindent
\textbf{Cortex M0--M4.}
Low energy ARM Cortex M0--M4 MCUs provide a new alternative for
networked embedded systems. They are significantly more computationally
powerful and while the appearance of a more powerful processor is not
particularly surprising, it may significantly expand the domain of problems
that can be solved by a ``mote''.
%
These MCUs feature notably more peripherals than previous generations,
offering elegant solutions to application problems or dramatically increasing
performance per joule.
To still meet low power targets, however, these MCUs have very complex power
management and peripheral configuration mechanisms. While these are fairly
easy to configure and abstract if energy usage is not a concern, as in most
Arduino-type systems, optimal energy usage requires a very close coupling
between dynamically changing application states and peripheral configurations.
This close coupling is difficult to reconcile with the goal of an embedded
OS that presents a simple environment for powerful application programming to
novice users.

% Interesting and fair point, but more on the systems side than the MCU, which
% is the discussion here (and we only have 2 pages..)
%
% A final characteristic is that the increase in DMA channels combined with the
% ability to configure peripheral events to asynchronously trigger other
% peripherals and DMA transfers allows experienced programmers to implement
% important parts of application logic with no CPU cycles - which can
% drastically reduce the time that the CPU is spent awake. The configuration of
% such functionality is fairly hardware specific and the question of how to
% automatically use this functionality or present it to novice programmers in an
% easy to use form is challenging.

\smallskip\noindent
\textbf{Impact of Energy Harvesting.}
%Today, it is possible to obtain temperature, humidity, or light levels every
%minute or two, under dimly lit conditions, using indoor photovoltaics that
%occupy a mere 2--3~cm$^2$.
%
%It is possible to build an energy-harvesting energy meter that measures
%real power in a form factor no larger than a clip-on split-core current
%transformer.
%
A decade of research in energy-harvesting transducers, efficient power
electronics, and compact energy storage technologies, coupled
with reductions in the idle and active power of radios,
instant-on/instant-write phase-change memory, and the efficacy of modern MCUs
make compact energy-harvesting sensors that can run perpetually, even in
indoor settings, a reality.
%
However, writing applications for intermittently-powered,
energy-harvesting systems is a challenge.  It requires revisiting many
assumptions about system startup, maintaining state across activation cycles,
discovering and communicating with neighbors, predicting future energy
availability, and scheduling operations under energy uncertainty.
%
Derving clearer power state and availability semantics, and a means to express
what state needs to be saved, present new embedded OS challenges.

%One way to
%circumvent some of the challenges is to grossly over provision the energy
%harvesting power supply in an attempt to mask the energy intermittency and all
%that dealing with it entails.  But this drives up size and cost, and it cannot
%fully mitigate the variability inherent in energy-harvesting operation.  A
%different path exposes the variability, perhaps through richer power supply
%interfaces, to the system software which can then context switch on time or
%energy quanta, and manage continuations across activations by leveraging fast
%and efficient context storage and restoration.

